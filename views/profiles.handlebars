{{> header}}

<div class="columns">
    <div class="column profilesContainer">

        {{#each profiles}}
        <div class="card">

            <div class="card-content">
                <div class="media">
                    <div class="media-left">
                        <figure class="image is-100x100">
                            <img src="https://bulma.io/images/placeholders/96x96.png" alt="Placeholder image">
                            <button id="upload_widget">Upload images</button>
                            {{!-- <button id="upload_widget" class="cloudinary-button">Upload images</button> --}}
                        </figure>
                    </div>
                    <div class="media-content">
                        <p class="title is-4">{{tools}}</p>
                        <p class="subtitle is-6">{{firstName }} {{lastName}} in <b>{{cityName}}</b></p>
                        <p class="subtitle is-6">{{email}}</p>
                    </div>

                </div>

                <div class="content">

                    <br>
                    <button class="delete-profile" data-id="{{id}}">Delete</button>
                    <a href="/profiles/{{id}}/edit"><button>Edit</button></a>
                    <a href="/profiles/{{id}}"><button>Add Tools</button></a>

                    
{{#each Tools}}
                <p>{{name}}</p>
            {{/each}}
{{/each}}
                
                </div>
            </div>
            

        
        </div>
    </div>
</div>
{{!-- or {{phone}} --}}
<script>
    $(document).ready(function () {
        $(".delete-profile").on("click", function () {
            const id = $(this).data("id");
            $.ajax({
                method: "DELETE",
                url: `/api/profiles/${id}`
            }).then(response => {
                window.location.reload();
            })
        })
    })
</script>


<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script type="text/javascript">
    var widget = cloudinary.applyUploadWidget({
        cloudName: 'dnmpdqhrd',
        uploadPreset: 'ml_default'
    },
        (error, result) => {
            if (!error && result && result.event === "success") {
                console.log('Done uploading..: ', result.info);
            }

        });

    document.getElementById("upload_widget").addEventListener("click", function () {
        myWidget.open();
    }, false);
</script>


{{!-- <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
     <script type="text/javascript">  
  var widget = cloudinary.applyUploadWidget({ 
    cloudName: 'dnmpdqhrd', 
    uploadPreset: 'ml_default' }, 
    (error, result) => { 
       if (!error && result && result.event === "success") { 
            console.log('Done uploading..: ', result.info); 
          }

     });    

   document.getElementById("upload_widget").addEventListener("click", function(){
    myWidget.open();
  }, false);
     </script> --}}


